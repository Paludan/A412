\subsection{main.\+c File Reference}
\label{main_8c}\index{main.\+c@{main.\+c}}
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$math.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$dirent.\+h$>$}\\*
\subsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct {\bf note}
\item 
struct {\bf data}
\item 
struct {\bf points}
\item 
struct {\bf mood\+Weighting}
\item 
struct {\bf event\+Placement}
\end{DoxyCompactItemize}
\subsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bf C\+H\+A\+R\+S}~1000
\item 
\#define {\bf S\+C\+A\+L\+E\+S\+I\+Z\+E}~7
\end{DoxyCompactItemize}
\subsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef enum {\bf mode} {\bf mode}
\item 
typedef enum {\bf tone} {\bf tone}
\item 
typedef enum {\bf mood} {\bf mood}
\end{DoxyCompactItemize}
\subsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum {\bf mode} \{ {\bf major}, 
{\bf minor}
 \}
\item 
enum {\bf tone} \{ \\*
{\bf C}, 
{\bf Csharp}, 
{\bf D}, 
{\bf Dsharp}, 
\\*
{\bf E}, 
{\bf F}, 
{\bf Fsharp}, 
{\bf G}, 
\\*
{\bf Gsharp}, 
{\bf A}, 
{\bf Asharp}, 
{\bf B}
 \}
\item 
enum {\bf mood} \{ {\bf glad}, 
{\bf sad}
 \}
\end{DoxyCompactItemize}
\subsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void {\bf check\+Directory} (char $\ast$, D\+I\+R $\ast$)
\item 
void {\bf find\+Note\+Length} (double x, int $\ast$, int $\ast$)
\item 
void {\bf print\+Note} ({\bf note})
\item 
int {\bf get\+Hex} (F\+I\+L\+E $\ast$, int[$\,$])
\item 
void {\bf fill\+Song\+Data} ({\bf data} $\ast$, int[$\,$], int)
\item 
int {\bf count\+Notes} (int[$\,$], int)
\item 
void {\bf fill\+Note} (int, {\bf note} $\ast$)
\item 
void {\bf print\+Song\+Data} ({\bf data})
\item 
void {\bf setting\+Points} (int $\ast$, int $\ast$, int $\ast$, int $\ast$, {\bf data}, int, {\bf note}[$\,$], int $\ast$)
\item 
void {\bf insert\+Moods} ({\bf mood\+Weighting}[$\,$], F\+I\+L\+E $\ast$)
\item 
int {\bf weighting\+Matrix} ({\bf mood\+Weighting}[$\,$], int, int, int, int)
\item 
void {\bf find\+Events} (int, int[$\,$], {\bf event\+Placement}[$\,$], {\bf note}[$\,$], int[$\,$], int $\ast$)
\item 
void {\bf insert\+Placement1} (int[$\,$], int $\ast$, int, {\bf note}[$\,$], int $\ast$)
\item 
void {\bf insert\+Placement2} (int[$\,$], int $\ast$, int)
\item 
int {\bf check\+Next\+Event} (int[$\,$], int)
\item 
void {\bf find\+Ticks} (int, int[$\,$], {\bf event\+Placement}[$\,$], {\bf note}[$\,$], int[$\,$], int, int $\ast$)
\item 
void {\bf count\+Ticks1} (int[$\,$], int $\ast$, int, int[$\,$], int $\ast$)
\item 
void {\bf count\+Ticks2} (int[$\,$], int $\ast$, int, int[$\,$], int $\ast$)
\item 
int {\bf sort\+Result} (const void $\ast$, const void $\ast$)
\item 
void {\bf delta\+Time\+To\+Note\+Length} (int $\ast$, int, int, {\bf note} $\ast$)
\item 
int {\bf is\+In\+Scale} (int, int[$\,$], int)
\item 
int {\bf is\+In\+Minor} (int)
\item 
int {\bf is\+In\+Major} (int)
\item 
int {\bf sort\+Toner} (const void $\ast$, const void $\ast$)
\item 
void {\bf find\+Mode} ({\bf note} $\ast$, int, {\bf data} $\ast$)
\item 
int {\bf Find\+Mood\+Amount} (F\+I\+L\+E $\ast$)
\item 
int {\bf main} (int argc, const char $\ast$argv[$\,$])
\item 
int {\bf sort\+Tones} (const void $\ast$a, const void $\ast$b)
\item 
void {\bf check\+Scale} (int scales[$\,$], int {\bf tone}, int key)
\item 
void {\bf find\+Mode} ({\bf note} note\+Ar[$\,$], int total\+Notes, {\bf data} $\ast${\bf data})
\end{DoxyCompactItemize}
\subsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int {\bf A\+M\+O\+U\+N\+T\+\_\+\+O\+F\+\_\+\+M\+O\+O\+D\+S}
\end{DoxyCompactItemize}


\subsubsection{Macro Definition Documentation}
\index{main.\+c@{main.\+c}!C\+H\+A\+R\+S@{C\+H\+A\+R\+S}}
\index{C\+H\+A\+R\+S@{C\+H\+A\+R\+S}!main.\+c@{main.\+c}}
\paragraph[{C\+H\+A\+R\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+H\+A\+R\+S~1000}\label{main_8c_a5d7cfaaf3d71eb89b31364adb9fda6a6}
\index{main.\+c@{main.\+c}!S\+C\+A\+L\+E\+S\+I\+Z\+E@{S\+C\+A\+L\+E\+S\+I\+Z\+E}}
\index{S\+C\+A\+L\+E\+S\+I\+Z\+E@{S\+C\+A\+L\+E\+S\+I\+Z\+E}!main.\+c@{main.\+c}}
\paragraph[{S\+C\+A\+L\+E\+S\+I\+Z\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+C\+A\+L\+E\+S\+I\+Z\+E~7}\label{main_8c_a3c7b5c7d1b09d118aa63ec87e3c73a8b}


\subsubsection{Typedef Documentation}
\index{main.\+c@{main.\+c}!mode@{mode}}
\index{mode@{mode}!main.\+c@{main.\+c}}
\paragraph[{mode}]{\setlength{\rightskip}{0pt plus 5cm}typedef enum {\bf mode}  {\bf mode}}\label{main_8c_abcec22444f1b2fc64f59764d40244d9f}
\index{main.\+c@{main.\+c}!mood@{mood}}
\index{mood@{mood}!main.\+c@{main.\+c}}
\paragraph[{mood}]{\setlength{\rightskip}{0pt plus 5cm}typedef enum {\bf mood}  {\bf mood}}\label{main_8c_a3e304bbd72e3a576384c6e8cdb661eb4}
\index{main.\+c@{main.\+c}!tone@{tone}}
\index{tone@{tone}!main.\+c@{main.\+c}}
\paragraph[{tone}]{\setlength{\rightskip}{0pt plus 5cm}typedef enum {\bf tone}  {\bf tone}}\label{main_8c_aac01cecf1f254ffa121e2715527a6a5a}


\subsubsection{Enumeration Type Documentation}
\index{main.\+c@{main.\+c}!mode@{mode}}
\index{mode@{mode}!main.\+c@{main.\+c}}
\paragraph[{mode}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf mode}}\label{main_8c_a1a6b6fb557d8d37d59700faf4e4c9167}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{major@{major}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!major@{major}}\item[{\em 
major\label{main_8c_a1a6b6fb557d8d37d59700faf4e4c9167adc8c3476e4d3526d10210987c7131cb5}
}]\index{minor@{minor}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!minor@{minor}}\item[{\em 
minor\label{main_8c_a1a6b6fb557d8d37d59700faf4e4c9167a252026d6db6e81a42ef18bfd98b45a11}
}]\end{description}
\end{Desc}

\begin{DoxyCode}
00026 \{major, minor\} mode;
\end{DoxyCode}
\index{main.\+c@{main.\+c}!mood@{mood}}
\index{mood@{mood}!main.\+c@{main.\+c}}
\paragraph[{mood}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf mood}}\label{main_8c_a845e01d4d631be8d8fac14b162607e7f}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{glad@{glad}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!glad@{glad}}\item[{\em 
glad\label{main_8c_a845e01d4d631be8d8fac14b162607e7fa55170d14edc722ae6672132bd212a19d}
}]\index{sad@{sad}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!sad@{sad}}\item[{\em 
sad\label{main_8c_a845e01d4d631be8d8fac14b162607e7fa545d9f58d50a21cb0f1a64155ec91a05}
}]\end{description}
\end{Desc}

\begin{DoxyCode}
00028 \{glad, sad\} mood;
\end{DoxyCode}
\index{main.\+c@{main.\+c}!tone@{tone}}
\index{tone@{tone}!main.\+c@{main.\+c}}
\paragraph[{tone}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf tone}}\label{main_8c_aeb761eda34d47c3e64ca804875fd919f}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{C@{C}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!C@{C}}\item[{\em 
C\label{main_8c_aeb761eda34d47c3e64ca804875fd919fa739ce3f516592d245d16fd8a3893472c}
}]\index{Csharp@{Csharp}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!Csharp@{Csharp}}\item[{\em 
Csharp\label{main_8c_aeb761eda34d47c3e64ca804875fd919fa443d44cb35267bc4445499d568e4bd26}
}]\index{D@{D}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!D@{D}}\item[{\em 
D\label{main_8c_aeb761eda34d47c3e64ca804875fd919fa77a6b11f9898c052926f1d49765861e8}
}]\index{Dsharp@{Dsharp}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!Dsharp@{Dsharp}}\item[{\em 
Dsharp\label{main_8c_aeb761eda34d47c3e64ca804875fd919fad3b2877ea9dc7d69bd1b52477a01a68b}
}]\index{E@{E}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!E@{E}}\item[{\em 
E\label{main_8c_aeb761eda34d47c3e64ca804875fd919fab199e021998d49b1f09338d8b9b18ecb}
}]\index{F@{F}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!F@{F}}\item[{\em 
F\label{main_8c_aeb761eda34d47c3e64ca804875fd919faf382a63cc3d6491bf26b59e66f46826d}
}]\index{Fsharp@{Fsharp}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!Fsharp@{Fsharp}}\item[{\em 
Fsharp\label{main_8c_aeb761eda34d47c3e64ca804875fd919fad4ad1b6a094e98ff41e6e4f366769fc3}
}]\index{G@{G}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!G@{G}}\item[{\em 
G\label{main_8c_aeb761eda34d47c3e64ca804875fd919fa2fe993340f6abb2234e543cd427df70b}
}]\index{Gsharp@{Gsharp}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!Gsharp@{Gsharp}}\item[{\em 
Gsharp\label{main_8c_aeb761eda34d47c3e64ca804875fd919fa2adbe5d79179fbb9103b944cd0f2d621}
}]\index{A@{A}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!A@{A}}\item[{\em 
A\label{main_8c_aeb761eda34d47c3e64ca804875fd919fa42a4ade1acd55a49164099104990e09f}
}]\index{Asharp@{Asharp}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!Asharp@{Asharp}}\item[{\em 
Asharp\label{main_8c_aeb761eda34d47c3e64ca804875fd919faf6099e2a982664654807b32a8f11f197}
}]\index{B@{B}!main.\+c@{main.\+c}}\index{main.\+c@{main.\+c}!B@{B}}\item[{\em 
B\label{main_8c_aeb761eda34d47c3e64ca804875fd919fa3f2a77ecd272aa6d6b5902faa5e5fc68}
}]\end{description}
\end{Desc}

\begin{DoxyCode}
00027 \{C, Csharp, D, Dsharp, E, F, Fsharp, G, Gsharp, A, Asharp, B\} tone;
\end{DoxyCode}


\subsubsection{Function Documentation}
\index{main.\+c@{main.\+c}!check\+Directory@{check\+Directory}}
\index{check\+Directory@{check\+Directory}!main.\+c@{main.\+c}}
\paragraph[{check\+Directory}]{\setlength{\rightskip}{0pt plus 5cm}void check\+Directory (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{M\+I\+D\+Ifile, }
\item[{D\+I\+R $\ast$}]{dir}
\end{DoxyParamCaption}
)}\label{main_8c_a15516ca0e878b486b04f9bd5d0b401d2}
A function to read music directory and prompt user to choose file 
\begin{DoxyParams}{Parameters}
{\em M\+I\+D\+Ifile} & a pointer to a string containing the name of the chosen input file \\
\hline
{\em dir} & a pointer to a directory \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00164                                              \{
00165   \textcolor{keyword}{struct }dirent *musicDir;
00166   \textcolor{keywordflow}{if} ((dir = opendir (\textcolor{stringliteral}{"./Music"})) != NULL) \{
00167     printf(\textcolor{stringliteral}{"Mulige numre\(\backslash\)n"});
00168       \textcolor{keywordflow}{while} ((musicDir = readdir (dir)) != NULL) \{
00169         printf (\textcolor{stringliteral}{"%s\(\backslash\)n"}, musicDir->d\_name);
00170       \}
00171   \} 
00172   \textcolor{keywordflow}{else} \{
00173     perror (\textcolor{stringliteral}{"Failure while opening directory"});
00174     exit (EXIT\_FAILURE);
00175   \}
00176   printf(\textcolor{stringliteral}{"Indtast det valgte nummer\(\backslash\)n"});
00177   scanf(\textcolor{stringliteral}{"%s"}, MIDIfile);
00178 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!check\+Next\+Event@{check\+Next\+Event}}
\index{check\+Next\+Event@{check\+Next\+Event}!main.\+c@{main.\+c}}
\paragraph[{check\+Next\+Event}]{\setlength{\rightskip}{0pt plus 5cm}int check\+Next\+Event (
\begin{DoxyParamCaption}
\item[{int}]{hex[$\,$], }
\item[{int}]{j}
\end{DoxyParamCaption}
)}\label{main_8c_a31a2c1016f54d5c2508c8a1578437f2d}

\begin{DoxyCode}
00263                                     \{
00264   \textcolor{keywordflow}{switch} (hex[j])\{
00265     \textcolor{keywordflow}{case} 0x90:
00266     \textcolor{keywordflow}{case} 0x80:
00267     \textcolor{keywordflow}{case} 0xA0:
00268     \textcolor{keywordflow}{case} 0xB0:
00269     \textcolor{keywordflow}{case} 0xC0:
00270     \textcolor{keywordflow}{case} 0xD0:
00271     \textcolor{keywordflow}{case} 0xE0: \textcolor{keywordflow}{return} 1; \textcolor{keywordflow}{break};
00272     \textcolor{keywordflow}{default}  : \textcolor{keywordflow}{return} 0; \textcolor{keywordflow}{break};
00273   \}
00274 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!check\+Scale@{check\+Scale}}
\index{check\+Scale@{check\+Scale}!main.\+c@{main.\+c}}
\paragraph[{check\+Scale}]{\setlength{\rightskip}{0pt plus 5cm}void check\+Scale (
\begin{DoxyParamCaption}
\item[{int}]{scales[$\,$], }
\item[{int}]{tone, }
\item[{int}]{key}
\end{DoxyParamCaption}
)}\label{main_8c_a14c87dc75ccb31a96d21ed5ca8edcb7e}

\begin{DoxyCode}
00513                                                 \{
00514   \textcolor{keywordflow}{if}(tone < key)
00515     tone += 12;
00516   scales[key] = isInMajor(tone - key);
00517 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!count\+Notes@{count\+Notes}}
\index{count\+Notes@{count\+Notes}!main.\+c@{main.\+c}}
\paragraph[{count\+Notes}]{\setlength{\rightskip}{0pt plus 5cm}int count\+Notes (
\begin{DoxyParamCaption}
\item[{int}]{hex[$\,$], }
\item[{int}]{amount}
\end{DoxyParamCaption}
)}\label{main_8c_a53151dcc1b6757799ff4fd28f192c9b9}
A function to count the number of notes in the entire song 
\begin{DoxyParams}{Parameters}
{\em hex\mbox{[}$\,$\mbox{]}} & an array with the stored information from the file \\
\hline
{\em amount} & an integer holding the total number of characters in the array \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00198                                      \{
00199   \textcolor{keywordtype}{int} i = 0, res = 0;
00200   \textcolor{keywordflow}{for}(i = 0; i < amount; i++)\{
00201     \textcolor{keywordflow}{if}(hex[i] == 0x90)\{
00202       res++;
00203     \}
00204   \}
00205   \textcolor{keywordflow}{return} res;
00206 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!count\+Ticks1@{count\+Ticks1}}
\index{count\+Ticks1@{count\+Ticks1}!main.\+c@{main.\+c}}
\paragraph[{count\+Ticks1}]{\setlength{\rightskip}{0pt plus 5cm}void count\+Ticks1 (
\begin{DoxyParamCaption}
\item[{int}]{hex[$\,$], }
\item[{int $\ast$}]{i, }
\item[{int}]{delta\+Counter, }
\item[{int}]{ticks[$\,$], }
\item[{int $\ast$}]{tick\+Counter}
\end{DoxyParamCaption}
)}\label{main_8c_af836f26ac499b26de031f92ef5899a31}

\begin{DoxyCode}
00312                                                                                     \{
00313   \textcolor{keywordflow}{while}(deltaCounter < 7 && hex[(*i + deltaCounter)] > 0x80)
00314     ticks[*tickCounter] += ((hex[(*i + deltaCounter++)] - 0x80) * 128);
00315   ticks[*tickCounter++] += hex[(*i + deltaCounter++)];
00316   i += deltaCounter;
00317 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!count\+Ticks2@{count\+Ticks2}}
\index{count\+Ticks2@{count\+Ticks2}!main.\+c@{main.\+c}}
\paragraph[{count\+Ticks2}]{\setlength{\rightskip}{0pt plus 5cm}void count\+Ticks2 (
\begin{DoxyParamCaption}
\item[{int}]{hex[$\,$], }
\item[{int $\ast$}]{i, }
\item[{int}]{delta\+Counter, }
\item[{int}]{ticks[$\,$], }
\item[{int $\ast$}]{tick\+Counter}
\end{DoxyParamCaption}
)}\label{main_8c_a4bc2fa0c74fcabd55e06bd0d49e1f992}

\begin{DoxyCode}
00319                                                                                     \{
00320   \textcolor{keywordflow}{while}(deltaCounter < 6 && hex[(*i + deltaCounter)] > 0x80)
00321     ticks[*tickCounter] += ((hex[(*i + deltaCounter++)] - 0x80) * 128);
00322   ticks[*tickCounter++] += hex[(*i + deltaCounter++)];
00323   i += deltaCounter;
00324 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!delta\+Time\+To\+Note\+Length@{delta\+Time\+To\+Note\+Length}}
\index{delta\+Time\+To\+Note\+Length@{delta\+Time\+To\+Note\+Length}!main.\+c@{main.\+c}}
\paragraph[{delta\+Time\+To\+Note\+Length}]{\setlength{\rightskip}{0pt plus 5cm}void delta\+Time\+To\+Note\+Length (
\begin{DoxyParamCaption}
\item[{int $\ast$}]{ticks, }
\item[{int}]{ppqn, }
\item[{int}]{size, }
\item[{{\bf note} $\ast$}]{note\+Ar}
\end{DoxyParamCaption}
)}\label{main_8c_a5ce54b23ee9b2c1ae92adac7a9505180}

\begin{DoxyCode}
00482                                                                          \{
00483 
00484   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < size; i++)\{
00485   
00486     \textcolor{keywordtype}{double} noteLength = ((double) (ticks[i])) / ((\textcolor{keywordtype}{double}) (ppqn/8));
00487 
00488     \textcolor{keywordflow}{if} (noteLength < 1.5 && noteLength >= 0)
00489       noteLength = 1;
00490     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (noteLength < 3 && noteLength >= 1.5)
00491       noteLength = 2;
00492     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (noteLength < 6 && noteLength >= 3)
00493       noteLength = 4;
00494     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (noteLength < 12 && noteLength >= 6)
00495       noteLength = 8;
00496     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (noteLength < 24 && noteLength >= 12)
00497       noteLength = 16;
00498     \textcolor{keywordflow}{else}
00499       noteLength = 32;
00500     
00501         noteAr[i].length = noteLength;
00502     \}
00503 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!fill\+Note@{fill\+Note}}
\index{fill\+Note@{fill\+Note}!main.\+c@{main.\+c}}
\paragraph[{fill\+Note}]{\setlength{\rightskip}{0pt plus 5cm}void fill\+Note (
\begin{DoxyParamCaption}
\item[{int}]{input\+Tone, }
\item[{{\bf note} $\ast$}]{note}
\end{DoxyParamCaption}
)}\label{main_8c_ad88978d32a0f080f58ed31ffe9c51396}
A function to fill out each of the structures of type note 
\begin{DoxyParams}{Parameters}
{\em input\+Tone} & the value of the hexadecimal collected on the \char`\"{}tone\char`\"{}-\/spot \\
\hline
{\em note$\ast$} & a pointer to a note-\/structure \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00330                                         \{
00331   note->tone = inputTone % 12;
00332   note->average = inputTone;
00333   note->octave = inputTone / 12;
00334 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!fill\+Song\+Data@{fill\+Song\+Data}}
\index{fill\+Song\+Data@{fill\+Song\+Data}!main.\+c@{main.\+c}}
\paragraph[{fill\+Song\+Data}]{\setlength{\rightskip}{0pt plus 5cm}void fill\+Song\+Data (
\begin{DoxyParamCaption}
\item[{{\bf data} $\ast$}]{data, }
\item[{int}]{hex[$\,$], }
\item[{int}]{numbers\+In\+Text}
\end{DoxyParamCaption}
)}\label{main_8c_a6406eca72b9402b7240ed0e453e8db46}
! A function, that fills out the song data 
\begin{DoxyParams}{Parameters}
{\em $\ast$data} & a pointer to a structure containing the tempo and mode of the song \\
\hline
{\em hex\mbox{[}$\,$\mbox{]}} & the array of integers read from the file \\
\hline
{\em numbers\+In\+Text} & the total amount of integers in the array \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00214                                                            \{
00215   \textcolor{keywordtype}{int} j;
00216   \textcolor{comment}{/*Find the mode of the song, initialised as minor atm*/}
00217   \textcolor{keywordflow}{for}(j = 0; j < numbersInText; j++)\{
00218     \textcolor{comment}{/* finds the tempo */}
00219     \textcolor{keywordflow}{if}(hex[j] == 0xff && hex[j+1] == 0x51 && hex[j+2] == 0x03)\{
00220       data->tempo =  60000000/((hex[j+3] << 16) | (hex[j+4] << 8) | (hex[j+5]));
00221     \}
00222   \}
00223 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!find\+Events@{find\+Events}}
\index{find\+Events@{find\+Events}!main.\+c@{main.\+c}}
\paragraph[{find\+Events}]{\setlength{\rightskip}{0pt plus 5cm}void find\+Events (
\begin{DoxyParamCaption}
\item[{int}]{numbers\+In\+Text, }
\item[{int}]{hex[$\,$], }
\item[{{\bf event\+Placement}}]{placement[$\,$], }
\item[{{\bf note}}]{note\+Ar[$\,$], }
\item[{int}]{ticks[$\,$], }
\item[{int $\ast$}]{size}
\end{DoxyParamCaption}
)}\label{main_8c_a958ac363192985c144e524cc6e092e7c}

\begin{DoxyCode}
00225                                                                                                            
           \{
00226   \textcolor{keywordtype}{int} noteOff = 0, noteOn = 0, afterTouch = 0, controlChange = 0,
00227       programChange = 0, channelPressure = 0, pitchWheel = 0, n = 0;
00228 
00229   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = 0; j < numbersInText; j++)\{
00230     \textcolor{keywordflow}{switch} (hex[j])\{
00231       \textcolor{keywordflow}{case} 0x90: insertPlacement1(hex, &placement[noteOn++].noteOn, j, noteAr, &n);               \textcolor{keywordflow}{break};
00232       \textcolor{keywordflow}{case} 0x80: insertPlacement1(hex, &placement[noteOff++].noteOff, j, noteAr, &n);             \textcolor{keywordflow}{break};
00233       \textcolor{keywordflow}{case} 0xA0: insertPlacement1(hex, &placement[afterTouch++].afterTouch, j, noteAr, &n);       \textcolor{keywordflow}{break};
00234       \textcolor{keywordflow}{case} 0xB0: insertPlacement1(hex, &placement[controlChange++].controlChange, j, noteAr, &n); \textcolor{keywordflow}{break};
00235       \textcolor{keywordflow}{case} 0xC0: insertPlacement2(hex, &placement[programChange++].programChange, j);             \textcolor{keywordflow}{break};
00236       \textcolor{keywordflow}{case} 0xD0: insertPlacement2(hex, &placement[channelPressure++].channelPressure, j);         \textcolor{keywordflow}{break};
00237       \textcolor{keywordflow}{case} 0xE0: insertPlacement1(hex, &placement[pitchWheel++].pitchWheel, j, noteAr, &n);       \textcolor{keywordflow}{break};
00238       \textcolor{keywordflow}{default}  :                                                                                  \textcolor{keywordflow}{break};
00239     \}
00240   \}
00241   findTicks(numbersInText, hex, placement, noteAr, ticks, noteOn, size);
00242 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!find\+Mode@{find\+Mode}}
\index{find\+Mode@{find\+Mode}!main.\+c@{main.\+c}}
\paragraph[{find\+Mode}]{\setlength{\rightskip}{0pt plus 5cm}void find\+Mode (
\begin{DoxyParamCaption}
\item[{{\bf note} $\ast$}]{, }
\item[{int}]{, }
\item[{{\bf data} $\ast$}]{}
\end{DoxyParamCaption}
)}\label{main_8c_a16182e7956158cfcf78a8b97423ee1da}
\index{main.\+c@{main.\+c}!find\+Mode@{find\+Mode}}
\index{find\+Mode@{find\+Mode}!main.\+c@{main.\+c}}
\paragraph[{find\+Mode}]{\setlength{\rightskip}{0pt plus 5cm}void find\+Mode (
\begin{DoxyParamCaption}
\item[{{\bf note}}]{note\+Ar[$\,$], }
\item[{int}]{total\+Notes, }
\item[{{\bf data} $\ast$}]{data}
\end{DoxyParamCaption}
)}\label{main_8c_a660cd7ea9eae225a44ccb0fd609984a3}
A function to find the mode of the song by first calculating the tone span over sets of notes in the song, and then comparing it to the definition of minor and major keys. 
\begin{DoxyParams}{Parameters}
{\em note\+Ar} & An array of all the notes in the entire song \\
\hline
{\em total\+Notes} & The number of notes in the song \\
\hline
{\em data} & The song data \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00524                                                         \{
00525   \textcolor{keywordtype}{int} majors[12] = \{1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1\}, minors[12] = \{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\};
00526   \textcolor{keywordtype}{int} x = 0, y = 0, z = 0, bar[4], sizeBar = 4, tempSpan = 999, span = 999, keynote = 0, 
      mode = 0, tempNote = 0;
00527 
00528   \textcolor{keywordflow}{for}(x = 0; x < totalNotes; x++)\{
00529     tempNote = noteAr[x].tone;
00530  
00531     \textcolor{keywordflow}{for}(y = C; y <= B; y++)\{
00532       \textcolor{keywordflow}{if}(majors[y])
00533         checkScale(majors, tempNote, y);
00534     \}
00535   \}
00536 
00537   \textcolor{comment}{/*TEST Keynote giver det forkerte svar, resten virker*/}
00538   \textcolor{keywordflow}{for}(y = 0; y < 12; y++)\{
00539     z = y;
00540     \textcolor{keywordflow}{if}(majors[z])\{
00541       \textcolor{keywordflow}{if}((z - 3) < 0)
00542         z += 12;
00543     minors[z-3] = 1;
00544     \}
00545   \}
00546   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} p = 0; p < 12; p++)\{
00547     printf(\textcolor{stringliteral}{"Dur: %d\(\backslash\)n"}, majors[p]);
00548   \}
00549   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} p = 0; p < 12; p++)
00550     printf(\textcolor{stringliteral}{"Mol: %d\(\backslash\)n"}, minors[p]);
00551   z = 0;
00552   x = 0;
00553 
00554   \textcolor{comment}{/*Goes through all notes of the song and puts them into an array*/}
00555   \textcolor{keywordflow}{while}(x < totalNotes)\{
00556     z = x;
00557     \textcolor{keywordflow}{for}(y = 0; y < sizeBar; y++, z++)\{
00558       \textcolor{keywordflow}{if}(z < totalNotes)
00559         bar[y] = noteAr[z].tone;
00560       \textcolor{keywordflow}{else}
00561         sizeBar = y;
00562     \}
00563 
00564     \textcolor{keywordflow}{if}(y == sizeBar)\{
00565       span = 999;
00566       \textcolor{comment}{/*Sort notes in acsending order*/}
00567       qsort(bar, sizeBar, \textcolor{keyword}{sizeof}(tone), sortTones);
00568 
00569       \textcolor{comment}{/*Find the lowest possible tonespan over the entire array of notes*/}
00570       \textcolor{keywordflow}{for}(z = 0; z < sizeBar; z++)\{
00571     \textcolor{keywordflow}{if}((z + 1) > 3)
00572           tempSpan = (bar[(z+1)%4]+12)-bar[z] + bar[(z+2)%4]-bar[(z+1)%4] + bar[(z+3)%4]-bar[(z+2)%4];
00573         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}((z + 2) > 3)
00574           tempSpan = bar[(z+1)]-bar[z] + (bar[(z+2)%4]+12)-bar[(z+1)%4] + bar[(z+3)%4]-bar[(z+2)%4];
00575     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}((z +3) > 3)
00576           tempSpan = bar[(z+1)]-bar[z] + bar[(z+2)]-bar[(z+1)] + (bar[(z+3)%4]+12)-bar[z];
00577     \textcolor{keywordflow}{else}
00578           tempSpan = bar[(z+1)]-bar[z] + bar[(z+2)]-bar[(z+1)] + bar[(z+3)]-bar[(z+2)];
00579         
00580     \textcolor{keywordflow}{if}(tempSpan < span && (majors[bar[z]] || minors[bar[z]]))\{
00581           span = tempSpan;
00582           keynote = bar[z];
00583         \}
00584       \}
00585       mode += isInScale(keynote, bar, sizeBar);
00586       printf(\textcolor{stringliteral}{"Moden er nu: %d\(\backslash\)n"}, mode);
00587       x++;
00588     \}
00589   \}
00590   
00591   \textcolor{keywordflow}{if}(mode > 0)
00592     data->mode = major;
00593   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(mode < 0)
00594     data->mode = minor;
00595 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!Find\+Mood\+Amount@{Find\+Mood\+Amount}}
\index{Find\+Mood\+Amount@{Find\+Mood\+Amount}!main.\+c@{main.\+c}}
\paragraph[{Find\+Mood\+Amount}]{\setlength{\rightskip}{0pt plus 5cm}int Find\+Mood\+Amount (
\begin{DoxyParamCaption}
\item[{F\+I\+L\+E $\ast$}]{moods}
\end{DoxyParamCaption}
)}\label{main_8c_aea24927f2da3a892904ec1abd4ad01bf}

\begin{DoxyCode}
00657                                \{
00658   \textcolor{keywordtype}{int} i = 1;
00659   \textcolor{keywordflow}{while}(fgetc(moods) != EOF)\{
00660     \textcolor{keywordflow}{if}(fgetc(moods) == \textcolor{charliteral}{'\(\backslash\)n'})
00661       i++;
00662   \}
00663   rewind(moods);
00664   \textcolor{keywordflow}{return} i;
00665 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!find\+Note\+Length@{find\+Note\+Length}}
\index{find\+Note\+Length@{find\+Note\+Length}!main.\+c@{main.\+c}}
\paragraph[{find\+Note\+Length}]{\setlength{\rightskip}{0pt plus 5cm}void find\+Note\+Length (
\begin{DoxyParamCaption}
\item[{double}]{x, }
\item[{int $\ast$}]{, }
\item[{int $\ast$}]{}
\end{DoxyParamCaption}
)}\label{main_8c_ab56a62ec1c82722ba291a717b2afca5b}
\index{main.\+c@{main.\+c}!find\+Ticks@{find\+Ticks}}
\index{find\+Ticks@{find\+Ticks}!main.\+c@{main.\+c}}
\paragraph[{find\+Ticks}]{\setlength{\rightskip}{0pt plus 5cm}void find\+Ticks (
\begin{DoxyParamCaption}
\item[{int}]{numbers\+In\+Text, }
\item[{int}]{hex[$\,$], }
\item[{{\bf event\+Placement}}]{placement[$\,$], }
\item[{{\bf note}}]{note\+Ar[$\,$], }
\item[{int}]{ticks[$\,$], }
\item[{int}]{note\+On, }
\item[{int $\ast$}]{size}
\end{DoxyParamCaption}
)}\label{main_8c_ac6acd514eb7de5e7d0a48cae55dc02ff}

\begin{DoxyCode}
00276                                                                                                            
                      \{
00277   \textcolor{keywordtype}{int} tickCounter = 0, deltaCounter1 = 3, deltaCounter2 = 2;
00278   
00279   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = 0; j < noteOn; j++)\{
00280     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = placement[j].noteOn; i < numbersInText; i++)\{
00281       \textcolor{keywordflow}{if}(hex[i] == 0x80)\{
00282         \textcolor{keywordflow}{if}(hex[i + 1] == noteAr[j].tone)
00283           \textcolor{keywordflow}{break};
00284         \textcolor{keywordflow}{else}\{
00285           countTicks1(hex, &i, deltaCounter1, ticks, &tickCounter);
00286         \}
00287       \}
00288       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(hex[i] == 0xA0)\{
00289         \textcolor{keywordflow}{if}(hex[i + 1] == noteAr[j].tone && hex[i + 2] == 0x00)
00290           \textcolor{keywordflow}{break};
00291         \textcolor{keywordflow}{else}\{
00292           countTicks1(hex, &i, deltaCounter1, ticks, &tickCounter);
00293         \}
00294       \}
00295       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(hex[i] == 0xD0)\{
00296         \textcolor{keywordflow}{if}(hex[i + 1] == 0x00)
00297           \textcolor{keywordflow}{break};
00298         \textcolor{keywordflow}{else}\{
00299           countTicks2(hex, &i, deltaCounter2, ticks, &tickCounter);
00300         \}
00301       \}
00302       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(hex[i] == 0xC0)\{
00303         countTicks2(hex, &i, deltaCounter2, ticks, &tickCounter);
00304       \}
00305       \textcolor{keywordflow}{else}\{
00306         countTicks1(hex, &i, deltaCounter1, ticks, &tickCounter);
00307       \}     
00308     \}
00309   \}
00310 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!get\+Hex@{get\+Hex}}
\index{get\+Hex@{get\+Hex}!main.\+c@{main.\+c}}
\paragraph[{get\+Hex}]{\setlength{\rightskip}{0pt plus 5cm}int get\+Hex (
\begin{DoxyParamCaption}
\item[{F\+I\+L\+E $\ast$}]{f, }
\item[{int}]{hex\+Ar[$\,$]}
\end{DoxyParamCaption}
)}\label{main_8c_a7e86822405cc3ff43db316d113a1fb6d}
A function, that retrieves the hexadecimals from the files and also returns the number of files 
\begin{DoxyParams}{Parameters}
{\em $\ast$f} & a pointer to the file the program is reading from \\
\hline
{\em hex\+Ar\mbox{[}$\,$\mbox{]}} & an array of integers, that the information is stored in \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00184                                 \{
00185   \textcolor{keywordtype}{int} i = 0, c;
00186   \textcolor{keywordflow}{while}( (c = fgetc(f)) != EOF && i < CHARS)\{
00187     hexAr[i] = c;
00188     i++;
00189   \}
00190   
00191   \textcolor{keywordflow}{return} i;
00192 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!insert\+Moods@{insert\+Moods}}
\index{insert\+Moods@{insert\+Moods}!main.\+c@{main.\+c}}
\paragraph[{insert\+Moods}]{\setlength{\rightskip}{0pt plus 5cm}void insert\+Moods (
\begin{DoxyParamCaption}
\item[{{\bf mood\+Weighting}}]{mood\+Array[$\,$], }
\item[{F\+I\+L\+E $\ast$}]{moods}
\end{DoxyParamCaption}
)}\label{main_8c_a1709777308c32674291e7213d55feb6e}

\begin{DoxyCode}
00443                                                         \{
00444   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < AMOUNT_OF_MOODS; i++)\{
00445     fscanf(moods, \textcolor{stringliteral}{"%s %d %d %d %d"}, moodArray[i].name , &moodArray[i].mode, 
00446                                     &moodArray[i].tempo, &moodArray[i].toneLength,
00447                                     &moodArray[i].pitch);
00448   \}
00449 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!insert\+Placement1@{insert\+Placement1}}
\index{insert\+Placement1@{insert\+Placement1}!main.\+c@{main.\+c}}
\paragraph[{insert\+Placement1}]{\setlength{\rightskip}{0pt plus 5cm}void insert\+Placement1 (
\begin{DoxyParamCaption}
\item[{int}]{hex[$\,$], }
\item[{int $\ast$}]{place, }
\item[{int}]{j, }
\item[{{\bf note}}]{note\+Ar[$\,$], }
\item[{int $\ast$}]{n}
\end{DoxyParamCaption}
)}\label{main_8c_afce19655c88726711949a8e720767874}

\begin{DoxyCode}
00244                                                                           \{
00245   \textcolor{keywordtype}{int} i = 3;
00246   \textcolor{keywordflow}{while}(i < 7 && hex[(j + i++)] > 0x80);
00247   \textcolor{keywordflow}{if}(checkNextEvent(hex, (j + i)))\{
00248     *place = j;
00249     \textcolor{keywordflow}{if}(hex[j] == 0x90)\{
00250       fillNote(hex[j + 1], &noteAr[*n]);
00251       *n += 1;
00252     \}   
00253   \} 
00254 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!insert\+Placement2@{insert\+Placement2}}
\index{insert\+Placement2@{insert\+Placement2}!main.\+c@{main.\+c}}
\paragraph[{insert\+Placement2}]{\setlength{\rightskip}{0pt plus 5cm}void insert\+Placement2 (
\begin{DoxyParamCaption}
\item[{int}]{hex[$\,$], }
\item[{int $\ast$}]{place, }
\item[{int}]{j}
\end{DoxyParamCaption}
)}\label{main_8c_a0349131ee04fd791a9bcd1205db44778}

\begin{DoxyCode}
00256                                                    \{
00257   \textcolor{keywordtype}{int} i = 2;
00258   \textcolor{keywordflow}{while}(i < 6 && hex[(j + i++)] > 0x80);
00259   \textcolor{keywordflow}{if}(checkNextEvent(hex, (j + i)))
00260     *place = j;
00261 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!is\+In\+Major@{is\+In\+Major}}
\index{is\+In\+Major@{is\+In\+Major}!main.\+c@{main.\+c}}
\paragraph[{is\+In\+Major}]{\setlength{\rightskip}{0pt plus 5cm}int is\+In\+Major (
\begin{DoxyParamCaption}
\item[{int}]{tone\+Leap}
\end{DoxyParamCaption}
)}\label{main_8c_a241d0a265bf9c508dee8671ecab5f1d8}
A function to check if the given tone leap is in the major scale. 
\begin{DoxyParams}{Parameters}
{\em tone\+Leap} & An integer describing the processed tone leap \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a boolean value, returns 1 if the tone leap is in the major scale, 0 if it's not. 
\end{DoxyReturn}

\begin{DoxyCode}
00646                            \{
00647   \textcolor{keywordtype}{int} major[] = \{0, 2, 4, 5, 7, 9, 11\};
00648 
00649   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < SCALESIZE; i++)\{
00650     \textcolor{keywordflow}{if}(toneLeap == major[i])
00651       \textcolor{keywordflow}{return} 1;
00652   \}
00653   \textcolor{keywordflow}{return} 0;
00654 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!is\+In\+Minor@{is\+In\+Minor}}
\index{is\+In\+Minor@{is\+In\+Minor}!main.\+c@{main.\+c}}
\paragraph[{is\+In\+Minor}]{\setlength{\rightskip}{0pt plus 5cm}int is\+In\+Minor (
\begin{DoxyParamCaption}
\item[{int}]{tone\+Leap}
\end{DoxyParamCaption}
)}\label{main_8c_a7a1c0b6f906689e24cb60e1e5ff8bc76}
A function to check if the given tone leap is in the minor scale. 
\begin{DoxyParams}{Parameters}
{\em tone\+Leap} & An integer describing the processed tone leap \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a boolean value, returns 1 if the tone leap is in the minor scale, 0 if it's not. 
\end{DoxyReturn}

\begin{DoxyCode}
00632                            \{
00633   \textcolor{keywordtype}{int} minor[] = \{0, 2, 3, 5, 7, 8, 10\};
00634 
00635   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < SCALESIZE; i++)\{
00636     \textcolor{keywordflow}{if}(toneLeap == minor[i])
00637       \textcolor{keywordflow}{return} 1;
00638   \}
00639   \textcolor{keywordflow}{return} 0;
00640 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!is\+In\+Scale@{is\+In\+Scale}}
\index{is\+In\+Scale@{is\+In\+Scale}!main.\+c@{main.\+c}}
\paragraph[{is\+In\+Scale}]{\setlength{\rightskip}{0pt plus 5cm}int is\+In\+Scale (
\begin{DoxyParamCaption}
\item[{int}]{keytone, }
\item[{int}]{other\+Tones[$\,$], }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\label{main_8c_ab07d21079009fe6f42cd1a95b5db3522}
A function to check if a given scale in given keytone corresponds with the tones in the rest of the song. 
\begin{DoxyParams}{Parameters}
{\em keytone} & The keytone of the processed scale \\
\hline
{\em other\+Tones\mbox{[}$\,$\mbox{]}} & An array of the rest of the tones, which the function compares to the keytone and mode \\
\hline
{\em size} & The number of tones in the other\+Tones array \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a boolean value, returns 1 if the mode is major, -\/1 if it's minor and 0, if wasn't possible to decide. 
\end{DoxyReturn}

\begin{DoxyCode}
00603                                                       \{
00604   \textcolor{keywordtype}{int} toneLeap, isMinor = 1, isMajor = 1;
00605 
00606   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < size; i++)\{
00607     \textcolor{keywordflow}{if}(otherTones[i] < keytone)
00608       otherTones[i] += 12;
00609       toneLeap = otherTones[i] - keytone;
00610 
00611       \textcolor{keywordflow}{if}(isMinor)
00612         isMinor = isInMinor(toneLeap);
00613       \textcolor{keywordflow}{if}(isMajor)
00614         isMajor = isInMajor(toneLeap);
00615     \}
00616 
00617     \textcolor{keywordflow}{if}(isMinor && isMajor)
00618       \textcolor{keywordflow}{return} 0;
00619     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(isMinor)
00620       \textcolor{keywordflow}{return} -1;
00621     \textcolor{keywordflow}{if}(isMajor)
00622       \textcolor{keywordflow}{return} 1;
00623 
00624     \textcolor{keywordflow}{return} 0;
00625 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!main@{main}}
\index{main@{main}!main.\+c@{main.\+c}}
\paragraph[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{const char $\ast$}]{argv[$\,$]}
\end{DoxyParamCaption}
)}\label{main_8c_ac0f2228420376f4db7e1274f2b41667c}

\begin{DoxyCode}
00094                                       \{
00095   DIR *dir;
00096   FILE *f;
00097   \textcolor{keywordtype}{char} MIDIfile[25];
00098   \textcolor{comment}{/*Variables*/}
00099   \textcolor{keywordtype}{int} numbersInText = 0, notes, i = 0, size = 0, moodOfMelodi = 0;
00100   \textcolor{comment}{/* PLACEHOLDER FIX THIS */}
00101   \textcolor{keywordtype}{int} mode = 5, tempo = 5, toneLength = 5, pitch = 5;
00102   FILE* moods = fopen(\textcolor{stringliteral}{"moods.txt"}, \textcolor{stringliteral}{"r"});
00103   \textcolor{keywordflow}{if}(moods == NULL)\{
00104     perror(\textcolor{stringliteral}{"Error: moods missing "});
00105     exit(EXIT\_FAILURE);
00106   \}
00107   AMOUNT_OF_MOODS = FindMoodAmount(moods);
00108   moodWeighting moodArray[AMOUNT_OF_MOODS];
00109   data data = \{0, major, D\};
00110   \textcolor{keywordflow}{if} (argv[1] == NULL)\{
00111     checkDirectory(MIDIfile);  
00112     f = fopen(MIDIfile,\textcolor{stringliteral}{"r"});  
00113     \textcolor{keywordflow}{if}(f == NULL)\{
00114       perror(\textcolor{stringliteral}{"Error opening file"});
00115       exit(EXIT\_FAILURE);
00116     \}
00117     closedir (dir);  
00118   \}
00119   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(argv[1] != NULL)\{
00120     f = fopen(argv[1],\textcolor{stringliteral}{"r"});
00121     \textcolor{keywordflow}{if}(f == NULL)\{
00122       perror(\textcolor{stringliteral}{"Error opening file"});
00123       exit(EXIT\_FAILURE);
00124     \}
00125   \}
00126 
00127   \textcolor{keywordtype}{int} *hex = (\textcolor{keywordtype}{int} *) malloc(CHARS * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));
00128   \textcolor{keywordflow}{if}(hex == NULL)\{
00129     printf(\textcolor{stringliteral}{"Memory allocation failed, bye!"});
00130     exit(EXIT\_FAILURE);
00131   \}
00132   \textcolor{comment}{/*Reading the data from the file*/}
00133   numbersInText = getHex(f, hex);
00134   fillSongData(&data, hex, numbersInText);
00135   notes = countNotes(hex, numbersInText);
00136   note *noteAr = (note*) malloc(notes * \textcolor{keyword}{sizeof}(note));
00137   \textcolor{keywordflow}{if}(noteAr == NULL)\{
00138     printf(\textcolor{stringliteral}{"Memory allocation failed, bye!"});
00139     exit(EXIT\_FAILURE);
00140   \}
00141   eventPlacement placement[numbersInText];
00142   \textcolor{keywordtype}{int} ticks[numbersInText];
00143   findEvents(numbersInText, hex, placement, noteAr, ticks, &size);
00144   insertMoods(moodArray, moods);
00145   \textcolor{keywordflow}{for}(i = 0; i < notes; i++)
00146     printNote(noteAr[i]);
00147   findMode(noteAr, notes, &data);
00148   settingPoints(&mode, &tempo, &toneLength, &pitch, data, notes, noteAr, &size);
00149   printSongData(data);
00150   moodOfMelodi = weightingMatrix(moodArray, mode, tempo, toneLength, pitch);
00151   printf(\textcolor{stringliteral}{"%d\(\backslash\)n"}, moodOfMelodi);
00152 
00153 
00154   \textcolor{comment}{/*Clean up and close*/}
00155   fclose(f);
00156   free(hex);
00157   free(noteAr);
00158 
00159   \textcolor{keywordflow}{return} 0;
00160 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!print\+Note@{print\+Note}}
\index{print\+Note@{print\+Note}!main.\+c@{main.\+c}}
\paragraph[{print\+Note}]{\setlength{\rightskip}{0pt plus 5cm}void print\+Note (
\begin{DoxyParamCaption}
\item[{{\bf note}}]{note}
\end{DoxyParamCaption}
)}\label{main_8c_aa9c735ae880cee4e1272bcf387462c9a}
A function to print the note 
\begin{DoxyParams}{Parameters}
{\em note} & the note structure to be printed \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00339                          \{
00340   printf(\textcolor{stringliteral}{"Tone: "});
00341 
00342   \textcolor{keywordflow}{switch} (note.tone)\{
00343     \textcolor{keywordflow}{case} C     : printf(\textcolor{stringliteral}{"C"}) ; \textcolor{keywordflow}{break};
00344     \textcolor{keywordflow}{case} Csharp: printf(\textcolor{stringliteral}{"C#"}); \textcolor{keywordflow}{break};
00345     \textcolor{keywordflow}{case} D     : printf(\textcolor{stringliteral}{"D"}) ; \textcolor{keywordflow}{break};
00346     \textcolor{keywordflow}{case} Dsharp: printf(\textcolor{stringliteral}{"D#"}); \textcolor{keywordflow}{break};
00347     \textcolor{keywordflow}{case} E     : printf(\textcolor{stringliteral}{"E"}) ; \textcolor{keywordflow}{break};
00348     \textcolor{keywordflow}{case} F     : printf(\textcolor{stringliteral}{"F"}) ; \textcolor{keywordflow}{break};
00349     \textcolor{keywordflow}{case} Fsharp: printf(\textcolor{stringliteral}{"F#"}); \textcolor{keywordflow}{break};
00350     \textcolor{keywordflow}{case} G     : printf(\textcolor{stringliteral}{"G"}) ; \textcolor{keywordflow}{break};
00351     \textcolor{keywordflow}{case} Gsharp: printf(\textcolor{stringliteral}{"G#"}); \textcolor{keywordflow}{break};
00352     \textcolor{keywordflow}{case} A     : printf(\textcolor{stringliteral}{"A"}) ; \textcolor{keywordflow}{break};
00353     \textcolor{keywordflow}{case} Asharp: printf(\textcolor{stringliteral}{"A#"}); \textcolor{keywordflow}{break};
00354     \textcolor{keywordflow}{case} B     : printf(\textcolor{stringliteral}{"B"}) ; \textcolor{keywordflow}{break};
00355     \textcolor{keywordflow}{default}    : printf(\textcolor{stringliteral}{"Undefined note"}); \textcolor{keywordflow}{break};
00356   \}
00357   printf(\textcolor{stringliteral}{", octave: %d\(\backslash\)n"}, note.octave);
00358 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!print\+Song\+Data@{print\+Song\+Data}}
\index{print\+Song\+Data@{print\+Song\+Data}!main.\+c@{main.\+c}}
\paragraph[{print\+Song\+Data}]{\setlength{\rightskip}{0pt plus 5cm}void print\+Song\+Data (
\begin{DoxyParamCaption}
\item[{{\bf data}}]{data}
\end{DoxyParamCaption}
)}\label{main_8c_a96686ff783072b26aa8666d0281d053c}
A function to print out the overall data of the song, tempo and mode 
\begin{DoxyParams}{Parameters}
{\em data} & the data to be printed \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
00363                              \{
00364   printf(\textcolor{stringliteral}{"Tempo: %d\(\backslash\)nMode: "}, data.tempo);
00365   \textcolor{keywordflow}{switch}(data.mode)\{
00366     \textcolor{keywordflow}{case} minor: printf(\textcolor{stringliteral}{"minor"}); \textcolor{keywordflow}{break};
00367     \textcolor{keywordflow}{case} major: printf(\textcolor{stringliteral}{"major"}); \textcolor{keywordflow}{break};
00368     \textcolor{keywordflow}{default}: printf(\textcolor{stringliteral}{"unknown mode"}); \textcolor{keywordflow}{break};
00369   \}
00370   printf(\textcolor{stringliteral}{"\(\backslash\)nKeytone: %d"}, data.key);
00371   putchar(\textcolor{charliteral}{'\(\backslash\)n'});
00372 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!setting\+Points@{setting\+Points}}
\index{setting\+Points@{setting\+Points}!main.\+c@{main.\+c}}
\paragraph[{setting\+Points}]{\setlength{\rightskip}{0pt plus 5cm}void setting\+Points (
\begin{DoxyParamCaption}
\item[{int $\ast$}]{mode, }
\item[{int $\ast$}]{tempo, }
\item[{int $\ast$}]{length, }
\item[{int $\ast$}]{octave, }
\item[{{\bf data}}]{data, }
\item[{int}]{notes, }
\item[{{\bf note}}]{note\+Ar[$\,$], }
\item[{int $\ast$}]{size}
\end{DoxyParamCaption}
)}\label{main_8c_ac5cf65542ee2eded456a070d2159af90}

\begin{DoxyCode}
00374                                                                                                            
              \{
00375   \textcolor{keywordtype}{int} deltaTime = 2, combined = 0, averageNote = 0;
00376   \textcolor{keywordflow}{switch}(data.mode)\{
00377     \textcolor{keywordflow}{case} minor: *mode = -5; \textcolor{keywordflow}{break};
00378     \textcolor{keywordflow}{case} major: *mode = 5; \textcolor{keywordflow}{break};
00379     \textcolor{keywordflow}{default}: *mode = 0; \textcolor{keywordflow}{break};
00380   \}
00381   \textcolor{keywordflow}{if}(data.tempo < 60)
00382     *tempo = -5;
00383   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data.tempo >= 60 && data.tempo < 70)
00384     *tempo = -4;
00385   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data.tempo >= 70 && data.tempo < 80)
00386     *tempo = -3;  
00387   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data.tempo >= 80 && data.tempo < 90)
00388     *tempo = -2;
00389   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data.tempo >= 90 && data.tempo < 100)
00390     *tempo = -1;
00391   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data.tempo >= 100 && data.tempo < 120)
00392     *tempo =  0;  
00393   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data.tempo >= 120 && data.tempo < 130)
00394     *tempo =  1;
00395   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data.tempo >= 130 && data.tempo < 140)
00396     *tempo =  2;
00397   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data.tempo >= 140 && data.tempo < 150)
00398     *tempo =  3;
00399   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data.tempo >= 150 && data.tempo < 160)
00400     *tempo =  4;
00401   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data.tempo >=  160)
00402     *tempo =  5;
00403 
00404   \textcolor{keywordflow}{switch}(deltaTime)\{
00405     \textcolor{keywordflow}{case} 1: *length = -5; \textcolor{keywordflow}{break};
00406     \textcolor{keywordflow}{case} 2: *length = -4; \textcolor{keywordflow}{break};
00407     \textcolor{keywordflow}{case} 4: *length = -2; \textcolor{keywordflow}{break};
00408     \textcolor{keywordflow}{case} 8: *length =  0; \textcolor{keywordflow}{break};
00409     \textcolor{keywordflow}{case} 16: *length = 3; \textcolor{keywordflow}{break};
00410     \textcolor{keywordflow}{case} 32: *length = 5; \textcolor{keywordflow}{break};
00411   \}
00412   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < notes; i++)\{
00413     combined += noteAr[i].average;
00414   \}
00415   averageNote = combined/notes;
00416 
00417   \textcolor{keywordflow}{if}(averageNote <= 16)
00418     *octave = -5;
00419   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(averageNote >= 17 && averageNote <= 23)
00420     *octave = -4;
00421   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(averageNote >= 24 && averageNote <= 30)
00422     *octave = -3;
00423   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(averageNote >= 31 && averageNote <= 37)
00424     *octave = -2;
00425   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(averageNote >= 38 && averageNote <= 44)
00426     *octave = -1;
00427   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(averageNote >= 45 && averageNote <= 51)
00428     *octave = 0;
00429   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(averageNote >= 52 && averageNote <= 58)
00430     *octave = 1;
00431   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(averageNote >= 59 && averageNote <= 65)
00432     *octave = 2;
00433   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(averageNote >= 66 && averageNote <= 72)
00434     *octave = 3;
00435   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(averageNote >= 73 && averageNote <= 79)
00436     *octave = 4;
00437   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(averageNote >=80)
00438     *octave = 5;
00439 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!sort\+Result@{sort\+Result}}
\index{sort\+Result@{sort\+Result}!main.\+c@{main.\+c}}
\paragraph[{sort\+Result}]{\setlength{\rightskip}{0pt plus 5cm}int sort\+Result (
\begin{DoxyParamCaption}
\item[{const void $\ast$}]{pa, }
\item[{const void $\ast$}]{pb}
\end{DoxyParamCaption}
)}\label{main_8c_ac6a3184d104e99d57824eecaabab8ed5}

\begin{DoxyCode}
00475                                               \{
00476   \textcolor{keywordtype}{int} a = *(\textcolor{keyword}{const} \textcolor{keywordtype}{int}*)pa;
00477   \textcolor{keywordtype}{int} b = *(\textcolor{keyword}{const} \textcolor{keywordtype}{int}*)pb;
00478   \textcolor{keywordflow}{return} (b-a);
00479 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!sort\+Toner@{sort\+Toner}}
\index{sort\+Toner@{sort\+Toner}!main.\+c@{main.\+c}}
\paragraph[{sort\+Toner}]{\setlength{\rightskip}{0pt plus 5cm}int sort\+Toner (
\begin{DoxyParamCaption}
\item[{const void $\ast$}]{, }
\item[{const void $\ast$}]{}
\end{DoxyParamCaption}
)}\label{main_8c_a27beb09cf7217b8c5f3789913aa857db}
\index{main.\+c@{main.\+c}!sort\+Tones@{sort\+Tones}}
\index{sort\+Tones@{sort\+Tones}!main.\+c@{main.\+c}}
\paragraph[{sort\+Tones}]{\setlength{\rightskip}{0pt plus 5cm}int sort\+Tones (
\begin{DoxyParamCaption}
\item[{const void $\ast$}]{a, }
\item[{const void $\ast$}]{b}
\end{DoxyParamCaption}
)}\label{main_8c_a33b74ebb6acaeb30576c9e66aebe2fb6}
A function to sort integers in ascending order. 
\begin{DoxyCode}
00507                                            \{
00508   \textcolor{keywordtype}{int} *i1 = (\textcolor{keywordtype}{int}*) a, *i2 = (\textcolor{keywordtype}{int}*) b;
00509 
00510   \textcolor{keywordflow}{return} *i1 - *i2;
00511 \}
\end{DoxyCode}
\index{main.\+c@{main.\+c}!weighting\+Matrix@{weighting\+Matrix}}
\index{weighting\+Matrix@{weighting\+Matrix}!main.\+c@{main.\+c}}
\paragraph[{weighting\+Matrix}]{\setlength{\rightskip}{0pt plus 5cm}int weighting\+Matrix (
\begin{DoxyParamCaption}
\item[{{\bf mood\+Weighting}}]{mood\+Array[$\,$], }
\item[{int}]{mode, }
\item[{int}]{tempo, }
\item[{int}]{tone\+Length, }
\item[{int}]{pitch}
\end{DoxyParamCaption}
)}\label{main_8c_ade6b8acc6a7f498b910c155b43d442b1}

\begin{DoxyCode}
00452                                                                                               \{
00453   \textcolor{keywordtype}{int} result[AMOUNT_OF_MOODS];
00454   
00455   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < AMOUNT_OF_MOODS; i++)\{
00456     result[i] = 0;
00457   \}
00458   
00459   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < AMOUNT_OF_MOODS; i++)\{
00460     result[i] += (moodArray[i].mode * mode);
00461     result[i] += (moodArray[i].tempo * tempo);
00462     result[i] += (moodArray[i].toneLength * toneLength);
00463     result[i] += (moodArray[i].pitch * pitch);
00464   \}
00465   
00466   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < AMOUNT_OF_MOODS; i++)\{
00467     printf(\textcolor{stringliteral}{"%s: %d\(\backslash\)n"}, moodArray[i].name, result[i]);
00468   \}
00469   
00470   qsort(result, AMOUNT\_OF\_MOODS, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}), sortResult);
00471   \textcolor{keywordflow}{return} result[0];
00472 \}
\end{DoxyCode}


\subsubsection{Variable Documentation}
\index{main.\+c@{main.\+c}!A\+M\+O\+U\+N\+T\+\_\+\+O\+F\+\_\+\+M\+O\+O\+D\+S@{A\+M\+O\+U\+N\+T\+\_\+\+O\+F\+\_\+\+M\+O\+O\+D\+S}}
\index{A\+M\+O\+U\+N\+T\+\_\+\+O\+F\+\_\+\+M\+O\+O\+D\+S@{A\+M\+O\+U\+N\+T\+\_\+\+O\+F\+\_\+\+M\+O\+O\+D\+S}!main.\+c@{main.\+c}}
\paragraph[{A\+M\+O\+U\+N\+T\+\_\+\+O\+F\+\_\+\+M\+O\+O\+D\+S}]{\setlength{\rightskip}{0pt plus 5cm}int A\+M\+O\+U\+N\+T\+\_\+\+O\+F\+\_\+\+M\+O\+O\+D\+S}\label{main_8c_ad4daca5a141533e7c95216763e28c4fe}
